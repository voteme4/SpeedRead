{% extends 'base.html' %}

{% block head %}
  <title>SpeedRead</title>
  <style>
    #pdf-container {
      width: 800px;
      height: 600px;
      border: 1px solid black;
    }
  </style>
{% endblock %}

{% block body %}
  <h1>PDF Uploader</h1>
  <input type="file" id="pdf-input" accept="application/pdf">
  <button id="upload-button">Upload PDF</button>
  <div id="pdf-container"></div>

  <script>
    const pdfInput = document.getElementById('pdf-input');
    const uploadButton = document.getElementById('upload-button');
    const pdfContainer = document.getElementById('pdf-container');

    uploadButton.addEventListener('click', async () => {
      const file = pdfInput.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = async (event) => {
          const pdfData = event.target.result;
          const pdfDoc = await pdfjsLib.getDocument({ data: pdfData });
          const pdfViewer = new pdfjsLib.PDFViewer({
            container: pdfContainer,
            pdf: pdfDoc,
          });
          pdfViewer.render();
        };
        reader.readAsArrayBuffer(file);
      }
    });
  </script>
{% endblock %}